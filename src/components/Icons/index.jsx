import React, { useState, useEffect } from "react";
import "./styles.scss";
import ImageUploading from "react-images-uploading";

export const AttachmentIcon = () => {
  const [images, setImages] = useState([]);
  const maxNumber = 3;

  const onChange = (imageList, addUpdateIndex) => {
    setImages(imageList);
  };

  return (
    <ImageUploading
      multiple
      value={images}
      onChange={onChange}
      maxNumber={maxNumber}
      dataURLKey="data_url"
    >
      {({
        imageList,
        onImageUpload,
        onImageRemoveAll,
        onImageUpdate,
        onImageRemove,
        isDragging,
        dragProps,
      }) => (
        //  UI
        <div className="upload__image-wrapper">
          <UploadIcon
            isDragging={isDragging}
            onImageUpload={onImageUpload}
            dragProps={dragProps}
          />

          {images.length !== 0 && (
            <RemoveAllIcon onImageRemoveAll={onImageRemoveAll} />
          )}
          {imageList.map((image, index) => (
            <div key={index} className="image-item">
              <img src={image["data_url"]} alt="" width="100" />
              <div className="image-item__btn-wrapper">
                <a href="#" onClick={() => onImageUpdate(index)}>
                  <UpdateIcon />
                </a>
                <a href="#" onClick={() => onImageRemove(index)}>
                  <RemoveIcon />
                </a>
              </div>
            </div>
          ))}
        </div>
      )}
    </ImageUploading>
  );
};

export const UploadIcon = ({ isDragging, onImageUpload, dragProps }) => {
  return (
    <div
      className="Icon"
      style={isDragging ? { color: "red" } : undefined}
      onClick={onImageUpload}
      {...dragProps}
    >
      <svg
        width="20px"
        height="15px"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M5.602 19.8c-1.293 0-2.504-.555-3.378-1.44-1.695-1.716-2.167-4.711.209-7.116l9.748-9.87c.988-1 2.245-1.387 3.448-1.06 1.183.32 2.151 1.301 2.468 2.498.322 1.22-.059 2.493-1.046 3.493l-9.323 9.44c-.532.539-1.134.858-1.738.922-.599.064-1.17-.13-1.57-.535-.724-.736-.828-2.117.378-3.337l6.548-6.63c.269-.272.705-.272.974 0s.269.714 0 .986l-6.549 6.631c-.566.572-.618 1.119-.377 1.364.106.106.266.155.451.134.283-.029.606-.216.909-.521l9.323-9.439c.64-.648.885-1.41.69-2.145a2.162 2.162 0 0 0-1.493-1.513c-.726-.197-1.48.052-2.12.7l-9.748 9.87c-1.816 1.839-1.381 3.956-.209 5.143 1.173 1.187 3.262 1.629 5.079-.212l9.748-9.87a.683.683 0 0 1 .974 0 .704.704 0 0 1 0 .987L9.25 18.15c-1.149 1.162-2.436 1.65-3.648 1.65z" />
      </svg>
    </div>
  );
};

export const RemoveAllIcon = ({ onImageRemoveAll }) => {
  return (
    <div className="Icon Icons extra" onClick={onImageRemoveAll}>
      <svg
        version="1.1"
        id="Capa_1"
        xmlns="http://www.w3.org/2000/svg"
        x="0px"
        y="0px"
        width="438.529px"
        height="438.529px"
        viewBox="0 0 438.529 438.529"
      >
        <g>
          <g>
            <path
              d="M417.689,75.654c-1.711-1.709-3.901-2.568-6.563-2.568h-88.224L302.917,25.41c-2.854-7.044-7.994-13.04-15.413-17.989
C280.078,2.473,272.556,0,264.945,0h-91.363c-7.611,0-15.131,2.473-22.554,7.421c-7.424,4.949-12.563,10.944-15.419,17.989
l-19.985,47.676h-88.22c-2.667,0-4.853,0.859-6.567,2.568c-1.709,1.713-2.568,3.903-2.568,6.567v18.274
c0,2.664,0.855,4.854,2.568,6.564c1.714,1.712,3.904,2.568,6.567,2.568h27.406v271.8c0,15.803,4.473,29.266,13.418,40.398
c8.947,11.139,19.701,16.703,32.264,16.703h237.542c12.566,0,23.319-5.756,32.265-17.268c8.945-11.52,13.415-25.174,13.415-40.971
V109.627h27.411c2.662,0,4.853-0.856,6.563-2.568c1.708-1.709,2.57-3.9,2.57-6.564V82.221
C420.26,79.557,419.397,77.367,417.689,75.654z M169.301,39.678c1.331-1.712,2.95-2.762,4.853-3.14h90.504
c1.903,0.381,3.525,1.43,4.854,3.14l13.709,33.404H155.311L169.301,39.678z M347.173,380.291c0,4.186-0.664,8.042-1.999,11.561
c-1.334,3.518-2.717,6.088-4.141,7.706c-1.431,1.622-2.423,2.427-2.998,2.427H100.493c-0.571,0-1.565-0.805-2.996-2.427
c-1.429-1.618-2.81-4.188-4.143-7.706c-1.331-3.519-1.997-7.379-1.997-11.561V109.627h255.815V380.291z"
            />
            <path
              d="M137.04,347.172h18.271c2.667,0,4.858-0.855,6.567-2.567c1.709-1.718,2.568-3.901,2.568-6.57V173.581
c0-2.663-0.859-4.853-2.568-6.567c-1.714-1.709-3.899-2.565-6.567-2.565H137.04c-2.667,0-4.854,0.855-6.567,2.565
c-1.711,1.714-2.568,3.904-2.568,6.567v164.454c0,2.669,0.854,4.853,2.568,6.57C132.186,346.316,134.373,347.172,137.04,347.172z"
            />
            <path
              d="M210.129,347.172h18.271c2.666,0,4.856-0.855,6.564-2.567c1.718-1.718,2.569-3.901,2.569-6.57V173.581
c0-2.663-0.852-4.853-2.569-6.567c-1.708-1.709-3.898-2.565-6.564-2.565h-18.271c-2.664,0-4.854,0.855-6.567,2.565
c-1.714,1.714-2.568,3.904-2.568,6.567v164.454c0,2.669,0.854,4.853,2.568,6.57C205.274,346.316,207.465,347.172,210.129,347.172z
"
            />
            <path
              d="M283.22,347.172h18.268c2.669,0,4.859-0.855,6.57-2.567c1.711-1.718,2.562-3.901,2.562-6.57V173.581
c0-2.663-0.852-4.853-2.562-6.567c-1.711-1.709-3.901-2.565-6.57-2.565H283.22c-2.67,0-4.853,0.855-6.571,2.565
c-1.711,1.714-2.566,3.904-2.566,6.567v164.454c0,2.669,0.855,4.853,2.566,6.57C278.367,346.316,280.55,347.172,283.22,347.172z"
            />
          </g>
        </g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
      </svg>
    </div>
  );
};

export const UpdateIcon = () => {
  return (
    <div className="Icons">
      <svg
        width="64"
        height="64"
        viewBox="0 0 64 64"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M21.14 34.7C21.1427 37.5794 22.2877 40.3402 24.3238 42.3762C26.3598 44.4123 29.1206 45.5573 32 45.56C46.4 44.96 46.4 24.44 32 23.85C29.1223 23.8526 26.3631 24.9963 24.3273 27.0302C22.2915 29.0641 21.1453 31.8223 21.14 34.7V34.7ZM40.36 34.7C40.3574 36.9164 39.4757 39.0412 37.9085 40.6085C36.3413 42.1757 34.2164 43.0573 32 43.06C20.93 42.64 20.93 26.77 32 26.35C34.2147 26.3526 36.338 27.2329 37.905 28.7979C39.4719 30.363 40.3547 32.4853 40.36 34.7Z"
          fill="black"
        />
        <path
          d="M46.7 12.61C46.5634 12.5187 46.4102 12.4552 46.2491 12.4232C46.088 12.3911 45.9222 12.3911 45.761 12.4231C45.5999 12.4552 45.4467 12.5186 45.3101 12.6099C45.1735 12.7011 45.0563 12.8184 44.965 12.955C44.8737 13.0916 44.8103 13.2448 44.7782 13.4059C44.7461 13.567 44.7461 13.7328 44.7782 13.8939C44.8102 14.055 44.8737 14.2083 44.9649 14.3448C45.0562 14.4814 45.1734 14.5987 45.31 14.69C65 27.84 55.66 58.67 32 58.75C6.34 58.43 -1.25 24 21.78 13L19.26 18.22C19.1457 18.4752 19.1195 18.7613 19.1856 19.033C19.2518 19.3048 19.4065 19.5468 19.6253 19.721C19.8442 19.8951 20.1147 19.9915 20.3944 19.995C20.6741 19.9984 20.9469 19.9087 21.17 19.74L32.78 10.43C32.9508 10.2932 33.083 10.1143 33.1637 9.91092C33.2443 9.70752 33.2706 9.48663 33.24 9.26998C33.2071 9.04882 33.1169 8.84012 32.9783 8.66467C32.8397 8.48922 32.6576 8.35314 32.45 8.26998L18.59 2.83998C18.3301 2.75269 18.0488 2.75256 17.7888 2.83961C17.5288 2.92667 17.3043 3.09615 17.1493 3.32235C16.9944 3.54856 16.9175 3.81913 16.9302 4.09301C16.943 4.3669 17.0447 4.62915 17.22 4.83998L22.11 10.05C-4.74 21.2 2.85 60.82 32 61.25C58.13 61.16 68.42 27.13 46.7 12.61ZM29.53 9.78998L23.91 14.29C26.13 9.52998 26.35 11.04 22.82 7.16998L29.53 9.78998Z"
          fill="black"
        />
      </svg>
    </div>
  );
};

const RemoveIcon = () => {
  return (
    <div className="Icons extra">
      <svg
        enable-background="new 0 0 26 26"
        id="Слой_1"
        version="1.1"
        viewBox="0 0 26 26"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M14.0605469,13L24.7802734,2.2802734c0.2929688-0.2929688,0.2929688-0.7675781,0-1.0605469  s-0.7675781-0.2929688-1.0605469,0L13,11.9394531L2.2802734,1.2197266c-0.2929688-0.2929688-0.7675781-0.2929688-1.0605469,0  s-0.2929688,0.7675781,0,1.0605469L11.9394531,13L1.2197266,23.7197266c-0.2929688,0.2929688-0.2929688,0.7675781,0,1.0605469  C1.3662109,24.9267578,1.5576172,25,1.75,25s0.3837891-0.0732422,0.5302734-0.2197266L13,14.0605469l10.7197266,10.7197266  C23.8662109,24.9267578,24.0576172,25,24.25,25s0.3837891-0.0732422,0.5302734-0.2197266  c0.2929688-0.2929688,0.2929688-0.7675781,0-1.0605469L14.0605469,13z"
          fill="#1D1D1B"
        />
      </svg>
    </div>
  );
};

export const SendIcon = () => {
  return (
    <div className="Icons">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.02 39.35">
        <defs>
          <style>.cls-1</style>
        </defs>
        <title>Asset 8</title>
        <g id="Layer_2" data-name="Layer 2">
          <g id="Layer_2-2" data-name="Layer 2">
            <path
              class="cls-1"
              d="M45.84,1.13,17.26,26.45l12.08,3.14a1,1,0,0,0,1.17-.51L46,1.26A.1.1,0,0,0,45.84,1.13Z"
            />
            <path
              class="cls-1"
              d="M9.62,23.15l-7.83-2a1,1,0,0,1-.15-2L45.62,1a.06.06,0,0,1,.05.11l-36.05,22,4.86,14.57a1,1,0,0,0,2-.31l.79-11"
            />
            <line class="cls-1" x1="16.06" y1="38.35" x2="23.65" y2="28.11" />
          </g>
        </g>
      </svg>
    </div>
  );
};

export const ChatIcon = () => {
  return (
    <div className="Icons Icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
        <defs>
          <style>.cls-1</style>
        </defs>
        <title>Asset 74</title>
        <g id="Layer_2" data-name="Layer 2">
          <g id="Layer_1-2" data-name="Layer 1">
            <path
              class="cls-1"
              d="M56,0H8A8,8,0,0,0,0,8V61.33a2.68,2.68,0,0,0,1.55,2.43A2.75,2.75,0,0,0,2.67,64a2.67,2.67,0,0,0,1.73-.64L20.07,49.93A8,8,0,0,1,25.28,48H56a8,8,0,0,0,8-8V8A8,8,0,0,0,56,0Zm2.67,40A2.68,2.68,0,0,1,56,42.67H25.28a13.36,13.36,0,0,0-8.68,3.21L5.33,55.54V8A2.68,2.68,0,0,1,8,5.33H56A2.68,2.68,0,0,1,58.67,8Z"
            />
            <path
              class="cls-1"
              d="M45.33,15.69H18.67a2.67,2.67,0,1,0,0,5.33H45.33a2.67,2.67,0,1,0,0-5.33Z"
            />
            <path
              class="cls-1"
              d="M45.33,26.36H18.67a2.67,2.67,0,1,0,0,5.33H45.33a2.67,2.67,0,1,0,0-5.33Z"
            />
          </g>
        </g>
      </svg>
    </div>
  );
};

// <div className="Icon" onChange={onUploadImg}>
//   <svg
//     width="20px"
//     height="15px"
//     viewBox="0 0 20 20"
//     xmlns="http://www.w3.org/2000/svg"
//   >
//     <path d="M5.602 19.8c-1.293 0-2.504-.555-3.378-1.44-1.695-1.716-2.167-4.711.209-7.116l9.748-9.87c.988-1 2.245-1.387 3.448-1.06 1.183.32 2.151 1.301 2.468 2.498.322 1.22-.059 2.493-1.046 3.493l-9.323 9.44c-.532.539-1.134.858-1.738.922-.599.064-1.17-.13-1.57-.535-.724-.736-.828-2.117.378-3.337l6.548-6.63c.269-.272.705-.272.974 0s.269.714 0 .986l-6.549 6.631c-.566.572-.618 1.119-.377 1.364.106.106.266.155.451.134.283-.029.606-.216.909-.521l9.323-9.439c.64-.648.885-1.41.69-2.145a2.162 2.162 0 0 0-1.493-1.513c-.726-.197-1.48.052-2.12.7l-9.748 9.87c-1.816 1.839-1.381 3.956-.209 5.143 1.173 1.187 3.262 1.629 5.079-.212l9.748-9.87a.683.683 0 0 1 .974 0 .704.704 0 0 1 0 .987L9.25 18.15c-1.149 1.162-2.436 1.65-3.648 1.65z" />
//   </svg>
// </div>

// {/* <div
//             className="Icon"
//             style={isDragging ? { color: "red" } : undefined}
//             onClick={onImageUpload}
//             {...dragProps}
//           >
//             <svg
//               width="20px"
//               height="15px"
//               viewBox="0 0 20 20"
//               xmlns="http://www.w3.org/2000/svg"
//             >
//               <path d="M5.602 19.8c-1.293 0-2.504-.555-3.378-1.44-1.695-1.716-2.167-4.711.209-7.116l9.748-9.87c.988-1 2.245-1.387 3.448-1.06 1.183.32 2.151 1.301 2.468 2.498.322 1.22-.059 2.493-1.046 3.493l-9.323 9.44c-.532.539-1.134.858-1.738.922-.599.064-1.17-.13-1.57-.535-.724-.736-.828-2.117.378-3.337l6.548-6.63c.269-.272.705-.272.974 0s.269.714 0 .986l-6.549 6.631c-.566.572-.618 1.119-.377 1.364.106.106.266.155.451.134.283-.029.606-.216.909-.521l9.323-9.439c.64-.648.885-1.41.69-2.145a2.162 2.162 0 0 0-1.493-1.513c-.726-.197-1.48.052-2.12.7l-9.748 9.87c-1.816 1.839-1.381 3.956-.209 5.143 1.173 1.187 3.262 1.629 5.079-.212l9.748-9.87a.683.683 0 0 1 .974 0 .704.704 0 0 1 0 .987L9.25 18.15c-1.149 1.162-2.436 1.65-3.648 1.65z" />
//             </svg>
//           </div> */}
